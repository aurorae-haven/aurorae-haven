<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <!--
      CSP Exception: This inline script is necessary for GitHub Pages SPA routing.
      It must execute immediately before any redirect to preserve the requested URL.
      External scripts would load too late, causing the path to be lost.
      This is a standard pattern for SPA deployment on GitHub Pages.
    -->
    <script>
      // GitHub Pages SPA redirect logic
      // This script runs when a user navigates directly to a route (e.g., /aurorae-haven/schedule)
      // and GitHub Pages serves this 404.html file.

      // Store the current path (including query and hash) so the SPA can restore it after redirect
      sessionStorage.setItem(
        'redirectPath',
        location.pathname + location.search + location.hash
      )

      // Compute the base path by detecting the repository name from the pathname
      // For GitHub Pages project sites, the URL structure is: /repo-name/route
      // We need to extract 'repo-name' and construct the base path
      var pathname = location.pathname
      var segments = pathname.split('/').filter(function(s) { return s })
      
      // If we have segments, assume the first one is the repository name
      // Otherwise, default to root
      var basePath
      if (segments.length > 0) {
        // For /aurorae-haven/schedule -> first segment is 'aurorae-haven'
        // For /aurorae-haven -> first segment is 'aurorae-haven'
        basePath = location.origin + '/' + segments[0] + '/'
      } else {
        // For / -> redirect to root
        basePath = location.origin + '/'
      }

      // Redirect to the base path (index.html will handle the SPA routing)
      // The React app reads redirectPath from sessionStorage and navigates to the correct route
      location.replace(basePath)
    </script>
  </head>
  <body>
    <p>Redirecting to app...</p>
  </body>
</html>
