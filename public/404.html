<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <meta http-equiv="refresh" content="0;url=/aurorae-haven/" />
    <!--
      CSP Exception: This inline script is necessary for GitHub Pages SPA routing.
      It must execute immediately before any redirect to preserve the requested URL.
      External scripts would load too late, causing the path to be lost.
      This is a standard pattern for SPA deployment on GitHub Pages.
    -->
    <script>
      // GitHub Pages SPA redirect logic
      // This script runs when a user navigates directly to a route (e.g., /aurorae-haven/schedule)
      // and GitHub Pages serves this 404.html file.

      // Debug logging
      console.log('[404.html] Current location:', location.href)
      console.log('[404.html] Pathname:', location.pathname)

      // Store the current path (including query and hash) so the SPA can restore it after redirect
      sessionStorage.setItem(
        'redirectPath',
        location.pathname + location.search + location.hash
      )

      // For GitHub Pages project sites, the base path is /repo-name/
      // Hardcode the repository name to ensure correct redirection
      var repoName = 'aurorae-haven'
      var basePath = location.origin + '/' + repoName + '/'

      console.log('[404.html] Redirecting to:', basePath)
      console.log('[404.html] Stored redirectPath:', sessionStorage.getItem('redirectPath'))

      // Redirect to the base path (index.html will handle the SPA routing)
      // The React app reads redirectPath from sessionStorage and navigates to the correct route
      location.replace(basePath)
    </script>
  </head>
  <body>
    <p>Redirecting to app...</p>
  </body>
</html>
