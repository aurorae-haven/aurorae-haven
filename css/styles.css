/* Stellar Journey â€” v11 tweaks */
:root{
  --ink:#eef0ff; --dim:#a9b1e0; --mint:#86f5e0; --line: rgba(200,210,255,.16);
  --glass-hi: rgba(18,22,52,.38);
  --glass-lo: rgba(18,22,52,.26);
  --shadow: 0 12px 40px rgba(0,0,0,.45);
  --blur: saturate(135%) blur(10px);
  --ease: cubic-bezier(.25,.1,.25,1);
  --dur: 240ms;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
  line-height:1.55;
  background:
    url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="240" height="240">\
<rect width="240" height="240" fill="none"/>\
<g fill="%23FFFFFF30">\
<circle cx="12" cy="18" r="0.7"/><circle cx="64" cy="36" r="0.6"/><circle cx="100" cy="8" r="0.6"/>\
<circle cx="150" cy="60" r="0.8"/><circle cx="200" cy="22" r="0.7"/><circle cx="180" cy="100" r="0.7"/>\
<circle cx="40" cy="120" r="0.8"/><circle cx="22" cy="180" r="0.7"/><circle cx="90" cy="160" r="0.8"/>\
<circle cx="210" cy="150" r="0.7"/><circle cx="140" cy="200" r="0.7"/>\
</g>\
<g fill="%23FFFFFF65">\
<circle cx="190" cy="86" r="1.2"/><circle cx="18" cy="140" r="1.4"/><circle cx="110" cy="200" r="1.3"/>\
</g>\
</svg>') repeat,
    radial-gradient(1000px 720px at 76% 28%, #0f1a4e 0%, rgba(15,26,78,0) 60%),
    radial-gradient(820px 520px at 16% 86%, #0a1340 0%, rgba(10,19,64,0) 60%),
    #060a1b;
  background-blend-mode: normal, screen, screen, normal;
  overflow-x:hidden;
}

/* Planet (no rings) */
.planet-wrap{ position:fixed; right:-120px; bottom:-120px; width:560px; height:560px; z-index:-1; pointer-events:none; }
.planet{
  position:absolute; right:0; bottom:0; width:520px; height:520px; border-radius:50%;
  background:
    radial-gradient( at 28% 26%, rgba(90,140,230,.18), rgba(90,140,230,0) 58% ),
    radial-gradient( at 26% 22%, rgba(35,70,150,.50), rgba(35,70,150,.05) 70% ),
    radial-gradient( farthest-side at 72% 78%, rgba(0,0,0,.48), rgba(0,0,0,.86) 80%),
    linear-gradient(180deg, #0b133a, #080f30 60%, #050a22);
  box-shadow: inset -36px -56px 110px rgba(0,0,0,.55), inset 54px 76px 130px rgba(110,160,245,.10), 0 0 90px rgba(70,120,220,.18);
  filter: saturate(108%);
}

/* App bar (airy glass) */
.appbar{position:sticky; top:0; z-index:20; background: linear-gradient(180deg, var(--glass-hi), var(--glass-lo)); backdrop-filter: var(--blur); border-bottom:1px solid var(--line)}
.appbar .inner{max-width:1240px;margin:0 auto;padding:12px 18px;display:flex;align-items:center;gap:16px}
.logo{width:24px;height:24px;border-radius:7px;background:radial-gradient(12px 12px at 40% 40%, #74ffe1 0%, rgba(116,255,225,0) 60%), radial-gradient(18px 18px at 70% 70%, #7ea6ff 0%, rgba(126,166,255,0) 60%); box-shadow:0 0 20px rgba(126,166,255,.35), 0 0 14px rgba(134,245,224,.18) inset;}
.brand{display:flex;flex-direction:column}
.brand b{font-weight:700;letter-spacing:.2px}
.brand small{color:var(--dim);opacity:.95}
.appnav{margin-left:auto;display:flex;gap:10px;align-items:center}
.appnav .item{display:inline-flex;gap:8px;align-items:center;padding:8px 8px;border-radius:12px;color:var(--ink);background: transparent; border: none;transition: transform var(--dur) var(--ease), filter var(--dur) var(--ease);}
.appnav .item:hover{filter:brightness(1.08); transform: translateY(-1px)}
.appnav .item.active{background: rgba(140,150,210,.12);padding:8px 12px;border:1px solid var(--line);box-shadow:0 6px 18px rgba(0,0,0,.20) inset}

/* Shell & glass cards */
.shell{max-width:1240px;margin:14px auto 24px;padding:0 18px}
.card{background: linear-gradient(180deg, var(--glass-lo), rgba(18,22,52,.22)); border: 1px solid var(--line); border-radius: 16px; box-shadow: var(--shadow); backdrop-filter: var(--blur); overflow:hidden}
.card .card-h{padding:10px 14px;border-bottom:1px solid var(--line);display:flex;align-items:center;justify-content:space-between}
.card .card-b{padding:14px}
.small{font-size:.92rem;color:var(--dim)}

/* Airy buttons */
.btn{display:inline-flex;align-items:center;gap:8px;cursor:pointer;color:#fff;padding:9px 12px;border-radius:12px;border:1px solid var(--line);background: rgba(35,45,100,.28); box-shadow:0 8px 24px rgba(0,0,0,.28); transition: transform var(--dur) var(--ease), filter var(--dur) var(--ease)}
.btn:hover{filter:brightness(1.06); transform: translateY(-1px)}

/* Icons */
.icon{width:18px;height:18px;stroke:var(--ink);stroke-width:2;stroke-linecap:round;stroke-linejoin:round;fill:none;opacity:.92}

/* ===== Schedule ===== */
.layout-schedule{display:grid;grid-template-columns:300px 1fr;gap:14px}
.sidebar .list{display:grid;gap:8px}
.list-row{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border:1px solid var(--line);border-radius:12px}
.calendar{background: rgba(16,20,44,.30); border:1px solid var(--line); border-radius:14px; padding:10px}
.hours{display:grid;grid-template-columns:80px 1fr;gap:0}
.hour-col{display:grid;grid-template-rows:repeat(16,46px)}
.hour-col .h{border-bottom:1px dashed var(--line);padding:6px 8px;color:var(--dim)}
.slots{position:relative;border-left:1px solid var(--line)}
.block{position:absolute; left:10px; right:10px; border-radius:10px; padding:8px 10px; background: rgba(142,200,255,.14); border:1px solid rgba(150,200,255,.24); z-index:2; overflow:hidden}
.block.task{background: rgba(200,180,255,.14); border-color: rgba(200,180,255,.24)}
.block .title{position:absolute;left:10px;top:6px;font-weight:700}
.block .meta{position:absolute;left:10px;bottom:6px;font-size:.9rem;color:var(--dim)}
.progress{position:absolute;left:10px;right:10px;bottom:28px;height:6px;background:rgba(120,140,200,.16);border-radius:999px;overflow:hidden}
.progress i{display:block;height:100%;width:50%;background:linear-gradient(90deg,#8ec8ff,#86f5e0)}

/* Runner overlay */
#runner{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.35); z-index:50}
#runner .panel{width:min(760px,92vw); background: linear-gradient(180deg, var(--glass-lo), rgba(18,22,52,.22)); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow); padding:16px}

/* ===== Sequences (runner top with bigger current) ===== */
.runner-top{display:grid;grid-template-rows:auto auto;gap:10px}
.seq-time{display:flex;align-items:center;justify-content:space-between}
.triptych{display:grid;grid-template-columns:1fr 1.8fr 1fr;gap:10px}
.panel{border:1px solid var(--line);border-radius:14px;padding:12px;background:rgba(16,20,44,.28)}
.panel.dim{opacity:.65}
.step-title{font-weight:700}
.step-meta{display:flex;align-items:center;justify-content:space-between}
.controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}

.bottom-split{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.details-list{display:grid;gap:8px}
.detail-row{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border:1px solid var(--line);border-radius:12px}

/* ===== Brain Dump ===== */
.layout-dump{display:grid;grid-template-columns:360px 1fr;gap:14px}
.toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
textarea{width:100%;min-height:180px;padding:12px;border-radius:12px;border:1px solid var(--line);background:rgba(10,14,38,.5);color:var(--ink)}
.tag-palette{display:flex;gap:8px;flex-wrap:wrap}
.tag{display:inline-flex;align-items:center;gap:6px;padding:6px 8px;border-radius:999px;background:rgba(200,220,255,.12);border:1px solid rgba(200,220,255,.22);cursor:grab}
.entries{display:grid;gap:8px}
.entry{padding:10px;border-radius:12px;border:1px solid var(--line);background:rgba(16,20,44,.32)}

a:focus,.btn:focus,button:focus,textarea:focus{outline:3px solid var(--mint);outline-offset:2px;border-radius:12px}
.toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:rgba(20,24,60,.9);color:#fff;padding:10px 14px;border-radius:12px;border:1px solid var(--line);display:none;z-index:60}


/* === SJ secure v12.3 additions (non-breaking) === */
.sj-label {
  display: inline-block;
  font-size: 11px;
  line-height: 1;
  padding: 4px 8px;
  border-radius: 9999px;
  margin-bottom: 6px;
  background: rgba(99, 102, 241, 0.15);
  border: 1px solid rgba(99, 102, 241, 0.35);
}
.fc-event-title { white-space: normal; line-height: 1.2; font-weight: 600; }
.sj-time { font-size: 12px; opacity: .85; margin-top: 2px; }
.sj-desc {
  margin-top: 6px; font-size: 12px; opacity: .9;
  display: -webkit-box; -webkit-box-orient: vertical;
  overflow: hidden; white-space: normal; line-height: 1.25;
  -webkit-line-clamp: 3;
}
.fc-dayGridMonth-view .sj-desc { -webkit-line-clamp: 2; }
.fc-timeGridWeek-view .sj-desc { -webkit-line-clamp: 4; }
.fc-timeGridDay-view .sj-desc { -webkit-line-clamp: 6; }
.fc-list .sj-desc { display: block; -webkit-line-clamp: unset; overflow: visible; }

